<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRC AI Portal - File Checker</title>
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
        }
        
        .header-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .file-checker-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .status-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .status-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status-warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .status-loading {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .file-item {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            background: rgba(248, 249, 250, 0.8);
            transition: all 0.3s ease;
            border-left: 5px solid #6c757d;
        }
        
        .file-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .file-item.success {
            border-left-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }
        
        .file-item.error {
            border-left-color: #dc3545;
            background: rgba(220, 53, 69, 0.1);
        }
        
        .file-item.warning {
            border-left-color: #ffc107;
            background: rgba(255, 193, 7, 0.1);
        }
        
        .file-item.loading {
            border-left-color: #17a2b8;
            background: rgba(23, 162, 184, 0.1);
        }
        
        .progress-container {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
        }
        
        .btn-check-all {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-check-all:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-check-all:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .summary-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .summary-item {
            text-align: center;
            padding: 15px;
        }
        
        .summary-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .summary-label {
            font-size: 0.9rem;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .spinner {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .copy-btn {
            background: transparent;
            border: none;
            color: #6c757d;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .copy-btn:hover {
            color: #495057;
        }
        
        .console-output {
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 10px;
            padding: 20px;
            font-family: 'Consolas', 'Monaco', monospace;
            height: 300px;
            overflow-y: auto;
            font-size: 0.9rem;
            margin-top: 20px;
        }
        
        .log-time {
            color: #6a9955;
        }
        
        .log-info {
            color: #569cd6;
        }
        
        .log-success {
            color: #4ec9b0;
        }
        
        .log-error {
            color: #f44747;
        }
        
        .log-warning {
            color: #d7ba7d;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header-card">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="mb-3">
                        <i class="fas fa-file-code me-2"></i>
                        FRC AI Portal - File Checker
                    </h1>
                    <p class="lead text-muted mb-0">
                        Verify that all JavaScript files are properly loaded and accessible
                    </p>
                </div>
                <div class="col-md-4 text-end">
                    <button id="checkAllBtn" class="btn-check-all" onclick="checkAllFiles()">
                        <i class="fas fa-play me-2"></i>Check All Files
                    </button>
                </div>
            </div>
        </div>

        <!-- Summary Stats -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="summary-card">
                    <div class="summary-item">
                        <div id="totalFiles" class="summary-value">0</div>
                        <div class="summary-label">Total Files</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="summary-card">
                    <div class="summary-item">
                        <div id="loadedFiles" class="summary-value text-success">0</div>
                        <div class="summary-label">Loaded</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="summary-card">
                    <div class="summary-item">
                        <div id="errorFiles" class="summary-value text-danger">0</div>
                        <div class="summary-label">Errors</div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="summary-card">
                    <div class="summary-item">
                        <div id="warningFiles" class="summary-value text-warning">0</div>
                        <div class="summary-label">Warnings</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="file-checker-card">
            <h4 class="mb-3">
                <i class="fas fa-tasks me-2"></i>
                File Check Progress
            </h4>
            <div class="d-flex justify-content-between mb-2">
                <span id="progressText">0% Complete</span>
                <span id="fileCount">0/0 Files</span>
            </div>
            <div class="progress-container">
                <div id="progressBar" class="progress-bar" style="width: 0%"></div>
            </div>
        </div>

        <!-- File List -->
        <div class="file-checker-card">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h4 class="mb-0">
                    <i class="fas fa-folder me-2"></i>
                    JavaScript Files
                </h4>
                <button class="btn btn-outline-primary btn-sm" onclick="toggleAllDetails()">
                    <i class="fas fa-expand me-1"></i>Toggle All Details
                </button>
            </div>
            
            <div id="fileList">
                <!-- File items will be inserted here -->
            </div>
        </div>

        <!-- Console Output -->
        <div class="file-checker-card">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h4 class="mb-0">
                    <i class="fas fa-terminal me-2"></i>
                    Console Output
                </h4>
                <div>
                    <button class="btn btn-outline-secondary btn-sm me-2" onclick="clearConsole()">
                        <i class="fas fa-broom me-1"></i>Clear
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" onclick="copyConsole()">
                        <i class="fas fa-copy me-1"></i>Copy
                    </button>
                </div>
            </div>
            
            <div id="consoleOutput" class="console-output">
                <div class="log-info">[<span class="log-time" id="currentTime">00:00:00</span>] System: Console initialized</div>
            </div>
        </div>

        <!-- Test Results -->
        <div class="file-checker-card">
            <h4 class="mb-3">
                <i class="fas fa-vial me-2"></i>
                Functionality Tests
            </h4>
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <div class="file-item">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-1">Global Functions Test</h6>
                                <small class="text-muted">Check if key functions are available globally</small>
                            </div>
                            <span id="globalTestStatus" class="status-badge status-loading">Pending</span>
                        </div>
                        <div id="globalTestDetails" class="mt-2" style="display: none;">
                            <div class="alert alert-info">
                                <small>Testing: loadSection, loadDashboard, switchCompany, etc.</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <div class="file-item">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-1">Module Import Test</h6>
                                <small class="text-muted">Test ES6 module imports</small>
                            </div>
                            <span id="moduleTestStatus" class="status-badge status-loading">Pending</span>
                        </div>
                        <div id="moduleTestDetails" class="mt-2" style="display: none;">
                            <div class="alert alert-info">
                                <small>Testing module imports and exports</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <div class="file-item">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-1">External Dependencies</h6>
                                <small class="text-muted">Check Bootstrap, Chart.js, Font Awesome</small>
                            </div>
                            <span id="dependencyTestStatus" class="status-badge status-loading">Pending</span>
                        </div>
                        <div id="dependencyTestDetails" class="mt-2" style="display: none;">
                            <div class="alert alert-info">
                                <small>Testing: Bootstrap, Chart.js, Font Awesome icons</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 mb-3">
                    <div class="file-item">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-1">Data Loading Test</h6>
                                <small class="text-muted">Test GitHub Pages data fetch</small>
                            </div>
                            <span id="dataTestStatus" class="status-badge status-loading">Pending</span>
                        </div>
                        <div id="dataTestDetails" class="mt-2" style="display: none;">
                            <div class="alert alert-info">
                                <small>Testing data loading from GitHub Pages</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button id="runTestsBtn" class="btn btn-primary w-100 mt-3" onclick="runAllTests()">
                <i class="fas fa-play-circle me-2"></i>Run All Tests
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Configuration
        const jsFiles = [
            { name: 'main.js', path: 'js/main.js', type: 'module', required: true },
            { name: 'config.js', path: 'js/config.js', type: 'module', required: true },
            { name: 'utilities.js', path: 'js/utilities.js', type: 'module', required: true },
            { name: 'data/loader.js', path: 'js/data/loader.js', type: 'module', required: true },
            { name: 'data/companies.js', path: 'js/data/companies.js', type: 'module', required: true },
            { name: 'modules/dashboard.js', path: 'js/modules/dashboard.js', type: 'module', required: true },
            { name: 'modules/entity.js', path: 'js/modules/entity.js', type: 'module', required: true },
            { name: 'modules/financial.js', path: 'js/modules/financial.js', type: 'module', required: true },
            { name: 'modules/compliance.js', path: 'js/modules/compliance.js', type: 'module', required: false },
            { name: 'modules/audit.js', path: 'js/modules/audit.js', type: 'module', required: false },
            { name: 'modules/risk.js', path: 'js/modules/risk.js', type: 'module', required: false },
            { name: 'modules/skepticism.js', path: 'js/modules/skepticism.js', type: 'module', required: false },
            { name: 'modules/data-import.js', path: 'js/modules/data-import.js', type: 'module', required: false },
            { name: 'modules/reports.js', path: 'js/modules/reports.js', type: 'module', required: false },
            { name: 'ui/notifications.js', path: 'js/ui/notifications.js', type: 'module', required: true },
            { name: 'ui/charts.js', path: 'js/ui/charts.js', type: 'module', required: false }
        ];

        // State variables
        let checkInProgress = false;
        let testResults = {
            total: 0,
            loaded: 0,
            errors: 0,
            warnings: 0
        };

        // DOM elements
        const fileListElement = document.getElementById('fileList');
        const consoleOutput = document.getElementById('consoleOutput');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const fileCount = document.getElementById('fileCount');
        const totalFilesElement = document.getElementById('totalFiles');
        const loadedFilesElement = document.getElementById('loadedFiles');
        const errorFilesElement = document.getElementById('errorFiles');
        const warningFilesElement = document.getElementById('warningFiles');
        const checkAllBtn = document.getElementById('checkAllBtn');
        const runTestsBtn = document.getElementById('runTestsBtn');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateTime();
            setInterval(updateTime, 1000);
            
            // Initialize file list
            renderFileList();
            updateSummary();
            
            // Auto-check on page load
            setTimeout(() => {
                checkAllFiles();
            }, 1000);
        });

        // Update time in console
        function updateTime() {
            const now = new Date();
            const timeString = now.toTimeString().split(' ')[0];
            document.getElementById('currentTime').textContent = timeString;
        }

        // Render file list
        function renderFileList() {
            fileListElement.innerHTML = '';
            jsFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item loading';
                fileItem.id = `file-${index}`;
                fileItem.innerHTML = `
                    <div class="d-flex justify-content-between align-items-center">
                        <div style="flex: 1;">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-file-code me-3" style="font-size: 1.5rem;"></i>
                                <div>
                                    <h6 class="mb-1">${file.name}</h6>
                                    <small class="text-muted d-block">${file.path}</small>
                                    ${file.required ? '<span class="badge bg-danger mt-1">Required</span>' : ''}
                                    ${file.type === 'module' ? '<span class="badge bg-info mt-1 ms-1">ES6 Module</span>' : ''}
                                </div>
                            </div>
                        </div>
                        <div class="text-end">
                            <span id="status-${index}" class="status-badge status-loading">
                                <span class="spinner"></span>Checking...
                            </span>
                            <button class="btn btn-sm btn-outline-secondary ms-2" onclick="toggleDetails(${index})">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                    </div>
                    <div id="details-${index}" class="mt-2" style="display: none;">
                        <div class="alert alert-info">
                            <small><i class="fas fa-info-circle me-1"></i> Details will appear after check</small>
                        </div>
                    </div>
                `;
                fileListElement.appendChild(fileItem);
            });
            
            totalFilesElement.textContent = jsFiles.length;
        }

        // Check all files
        async function checkAllFiles() {
            if (checkInProgress) {
                logMessage('File check already in progress', 'warning');
                return;
            }
            
            checkInProgress = true;
            checkAllBtn.disabled = true;
            checkAllBtn.innerHTML = '<span class="spinner"></span>Checking...';
            
            // Reset state
            testResults = { total: jsFiles.length, loaded: 0, errors: 0, warnings: 0 };
            
            logMessage('Starting file check...', 'info');
            
            // Check each file
            for (let i = 0; i < jsFiles.length; i++) {
                await checkFile(i);
                updateProgress(i + 1);
            }
            
            // Final update
            checkInProgress = false;
            checkAllBtn.disabled = false;
            checkAllBtn.innerHTML = '<i class="fas fa-redo me-2"></i>Check Again';
            
            logMessage(`File check completed: ${testResults.loaded} loaded, ${testResults.errors} errors, ${testResults.warnings} warnings`, 
                      testResults.errors > 0 ? 'error' : 'success');
            
            updateSummary();
            
            // Run tests if all files loaded successfully
            if (testResults.errors === 0) {
                setTimeout(() => {
                    runAllTests();
                }, 1000);
            }
        }

        // Check individual file
        async function checkFile(index) {
            const file = jsFiles[index];
            const statusElement = document.getElementById(`status-${index}`);
            const detailsElement = document.getElementById(`details-${index}`);
            
            try {
                // Try to fetch the file
                const response = await fetch(file.path);
                
                if (response.ok) {
                    // File exists, now try to parse/load it
                    const content = await response.text();
                    
                    // Basic validation
                    let warnings = [];
                    
                    if (file.type === 'module') {
                        if (!content.includes('export')) {
                            warnings.push('No export statements found');
                        }
                        if (!content.includes('import') && file.name !== 'main.js') {
                            warnings.push('No import statements found');
                        }
                    }
                    
                    if (content.length < 10) {
                        warnings.push('File appears to be empty or very small');
                    }
                    
                    // Update UI
                    statusElement.className = 'status-badge ' + 
                        (warnings.length > 0 ? 'status-warning' : 'status-success');
                    statusElement.innerHTML = warnings.length > 0 ? 
                        `<i class="fas fa-exclamation-triangle me-1"></i>Warning (${warnings.length})` : 
                        `<i class="fas fa-check-circle me-1"></i>Loaded`;
                    
                    // Update file item style
                    const fileItem = document.getElementById(`file-${index}`);
                    fileItem.className = 'file-item ' + 
                        (warnings.length > 0 ? 'warning' : 'success');
                    
                    // Update details
                    let detailsHTML = `
                        <div class="alert alert-success">
                            <h6><i class="fas fa-check-circle me-2"></i>File Loaded Successfully</h6>
                            <small>Size: ${(content.length / 1024).toFixed(2)} KB</small><br>
                            <small>Status: ${response.status} ${response.statusText}</small>
                        </div>
                    `;
                    
                    if (warnings.length > 0) {
                        detailsHTML += `
                            <div class="alert alert-warning">
                                <h6><i class="fas fa-exclamation-triangle me-2"></i>Warnings</h6>
                                <ul class="mb-0">
                                    ${warnings.map(w => `<li><small>${w}</small></li>`).join('')}
                                </ul>
                            </div>
                        `;
                        testResults.warnings++;
                    }
                    
                    detailsElement.innerHTML = detailsHTML;
                    testResults.loaded++;
                    
                    logMessage(`✓ ${file.name}: Loaded successfully`, 'success');
                    
                } else {
                    // File not found or error
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
            } catch (error) {
                // Handle error
                statusElement.className = 'status-badge status-error';
                statusElement.innerHTML = `<i class="fas fa-times-circle me-1"></i>Error`;
                
                const fileItem = document.getElementById(`file-${index}`);
                fileItem.className = 'file-item error';
                
                detailsElement.innerHTML = `
                    <div class="alert alert-danger">
                        <h6><i class="fas fa-times-circle me-2"></i>Failed to Load</h6>
                        <small>Error: ${error.message}</small><br>
                        <small>Path: ${file.path}</small>
                    </div>
                `;
                
                testResults.errors++;
                
                if (file.required) {
                    logMessage(`✗ ${file.name}: REQUIRED FILE NOT FOUND - ${error.message}`, 'error');
                } else {
                    logMessage(`✗ ${file.name}: Optional file not found - ${error.message}`, 'warning');
                }
            }
        }

        // Update progress bar
        function updateProgress(current) {
            const percent = Math.round((current / jsFiles.length) * 100);
            progressBar.style.width = `${percent}%`;
            progressText.textContent = `${percent}% Complete`;
            fileCount.textContent = `${current}/${jsFiles.length} Files`;
        }

        // Update summary
        function updateSummary() {
            loadedFilesElement.textContent = testResults.loaded;
            errorFilesElement.textContent = testResults.errors;
            warningFilesElement.textContent = testResults.warnings;
        }

        // Toggle details
        function toggleDetails(index) {
            const details = document.getElementById(`details-${index}`);
            const button = details.parentElement.querySelector('button');
            const icon = button.querySelector('i');
            
            if (details.style.display === 'none') {
                details.style.display = 'block';
                icon.className = 'fas fa-chevron-up';
            } else {
                details.style.display = 'none';
                icon.className = 'fas fa-chevron-down';
            }
        }

        // Toggle all details
        function toggleAllDetails() {
            const allHidden = Array.from(document.querySelectorAll('[id^="details-"]'))
                .every(el => el.style.display === 'none');
            
            jsFiles.forEach((_, index) => {
                const details = document.getElementById(`details-${index}`);
                const button = document.querySelector(`#file-${index} button`);
                const icon = button.querySelector('i');
                
                if (allHidden) {
                    details.style.display = 'block';
                    icon.className = 'fas fa-chevron-up';
                } else {
                    details.style.display = 'none';
                    icon.className = 'fas fa-chevron-down';
                }
            });
        }

        // Log messages to console
        function logMessage(message, type = 'info') {
            const now = new Date();
            const timeString = now.toTimeString().split(' ')[0];
            
            const logEntry = document.createElement('div');
            logEntry.className = `log-${type}`;
            logEntry.innerHTML = `[<span class="log-time">${timeString}</span>] ${message}`;
            
            consoleOutput.appendChild(logEntry);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
            
            // Also log to browser console
            switch(type) {
                case 'error': console.error(message); break;
                case 'warning': console.warn(message); break;
                case 'success': console.log('%c' + message, 'color: green'); break;
                default: console.log(message);
            }
        }

        // Clear console
        function clearConsole() {
            consoleOutput.innerHTML = '<div class="log-info">[<span class="log-time" id="currentTime">00:00:00</span>] System: Console cleared</div>';
            updateTime();
        }

        // Copy console
        function copyConsole() {
            const text = consoleOutput.innerText;
            navigator.clipboard.writeText(text).then(() => {
                logMessage('Console output copied to clipboard', 'success');
            }).catch(err => {
                logMessage(`Failed to copy: ${err}`, 'error');
            });
        }

        // Run all tests
        async function runAllTests() {
            runTestsBtn.disabled = true;
            runTestsBtn.innerHTML = '<span class="spinner"></span>Running Tests...';
            
            logMessage('Starting functionality tests...', 'info');
            
            // Run tests sequentially
            await testGlobalFunctions();
            await testModuleImports();
            await testDependencies();
            await testDataLoading();
            
            runTestsBtn.disabled = false;
            runTestsBtn.innerHTML = '<i class="fas fa-play-circle me-2"></i>Run All Tests';
            
            logMessage('All tests completed', 'info');
        }

        // Test global functions
        async function testGlobalFunctions() {
            const statusElement = document.getElementById('globalTestStatus');
            const detailsElement = document.getElementById('globalTestDetails');
            
            statusElement.className = 'status-badge status-loading';
            statusElement.innerHTML = '<span class="spinner"></span>Testing...';
            
            await new Promise(resolve => setTimeout(resolve, 500));
            
            const requiredFunctions = [
                'loadSection',
                'loadDashboard', 
                'loadEntityProfile',
                'loadFinancialStatements',
                'switchCompany',
                'filterCompanies'
            ];
            
            const missingFunctions = [];
            const availableFunctions = [];
            
            requiredFunctions.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    availableFunctions.push(funcName);
                } else {
                    missingFunctions.push(funcName);
                }
            });
            
            if (missingFunctions.length === 0) {
                statusElement.className = 'status-badge status-success';
                statusElement.innerHTML = '<i class="fas fa-check-circle me-1"></i>All Functions Found';
                
                detailsElement.innerHTML = `
                    <div class="alert alert-success">
                        <h6><i class="fas fa-check-circle me-2"></i>All Global Functions Available</h6>
                        <small>Found ${availableFunctions.length} functions: ${availableFunctions.join(', ')}</small>
                    </div>
                `;
                
                logMessage(`✓ Global functions: All ${availableFunctions.length} functions available`, 'success');
                
            } else {
                statusElement.className = 'status-badge status-error';
                statusElement.innerHTML = '<i class="fas fa-times-circle me-1"></i>Missing Functions';
                
                detailsElement.innerHTML = `
                    <div class="alert alert-danger">
                        <h6><i class="fas fa-times-circle me-2"></i>Missing Functions</h6>
                        <small>Found: ${availableFunctions.length} functions</small><br>
                        <small>Missing: ${missingFunctions.length} functions</small><br>
                        <small class="text-danger">Required: ${missingFunctions.join(', ')}</small>
                    </div>
                `;
                
                logMessage(`✗ Global functions: Missing ${missingFunctions.length} functions - ${missingFunctions.join(', ')}`, 'error');
            }
        }

        // Test module imports
        async function testModuleImports() {
            const statusElement = document.getElementById('moduleTestStatus');
            const detailsElement = document.getElementById('moduleTestDetails');
            
            statusElement.className = 'status-badge status-loading';
            statusElement.innerHTML = '<span class="spinner"></span>Testing...';
            
            await new Promise(resolve => setTimeout(resolve, 500));
            
            try {
                // Try to dynamically import main.js
                await import('./js/main.js');
                
                statusElement.className = 'status-badge status-success';
                statusElement.innerHTML = '<i class="fas fa-check-circle me-1"></i>Modules Loaded';
                
                detailsElement.innerHTML = `
                    <div class="alert alert-success">
                        <h6><i class="fas fa-check-circle me-2"></i>ES6 Modules Loaded Successfully</h6>
                        <small>main.js imported successfully</small><br>
                        <small>All module dependencies resolved</small>
                    </div>
                `;
                
                logMessage('✓ ES6 modules: main.js imported successfully', 'success');
                
            } catch (error) {
                statusElement.className = 'status-badge status-error';
                statusElement.innerHTML = '<i class="fas fa-times-circle me-1"></i>Import Failed';
                
                detailsElement.innerHTML = `
                    <div class="alert alert-danger">
                        <h6><i class="fas fa-times-circle me-2"></i>Module Import Error</h6>
                        <small>Error: ${error.message}</small><br>
                        <small>This could be due to circular dependencies or missing files</small>
                    </div>
                `;
                
                logMessage(`✗ ES6 modules: Import failed - ${error.message}`, 'error');
            }
        }

        // Test dependencies
        async function testDependencies() {
            const statusElement = document.getElementById('dependencyTestStatus');
            const detailsElement = document.getElementById('dependencyTestDetails');
            
            statusElement.className = 'status-badge status-loading';
            statusElement.innerHTML = '<span class="spinner"></span>Testing...';
            
            await new Promise(resolve => setTimeout(resolve, 500));
            
            const tests = {
                'Bootstrap': typeof bootstrap !== 'undefined',
                'Chart.js': typeof Chart !== 'undefined',
                'Font Awesome': document.querySelector('.fa-check-circle') !== null,
                'jQuery': typeof $ !== 'undefined'
            };
            
            const passed = Object.values(tests).filter(Boolean).length;
            const total = Object.keys(tests).length;
            
            if (passed === total) {
                statusElement.className = 'status-badge status-success';
                statusElement.innerHTML = '<i class="fas fa-check-circle me-1"></i>All Loaded';
                
                detailsElement.innerHTML = `
                    <div class="alert alert-success">
                        <h6><i class="fas fa-check-circle me-2"></i>All Dependencies Loaded</h6>
                        <small>Bootstrap: ✓ Loaded</small><br>
                        <small>Chart.js: ✓ Loaded</small><br>
                        <small>Font Awesome: ✓ Loaded</small><br>
                        <small>jQuery: ${tests['jQuery'] ? '✓ Loaded' : '✗ Not required'}</small>
                    </div>
                `;
                
                logMessage(`✓ Dependencies: All ${total} dependencies loaded`, 'success');
                
            } else {
                statusElement.className = 'status-badge status-warning';
                statusElement.innerHTML = '<i class="fas fa-exclamation-triangle me-1"></i>Partial';
                
                const missing = Object.keys(tests).filter(key => !tests[key]);
                
                detailsElement.innerHTML = `
                    <div class="alert alert-warning">
                        <h6><i class="fas fa-exclamation-triangle me-2"></i>Some Dependencies Missing</h6>
                        <small>Loaded: ${passed}/${total}</small><br>
                        <small>Missing: ${missing.join(', ')}</small>
                    </div>
                `;
                
                logMessage(`⚠ Dependencies: ${passed}/${total} loaded, missing: ${missing.join(', ')}`, 'warning');
            }
        }

        // Test data loading
        async function testDataLoading() {
            const statusElement = document.getElementById('dataTestStatus');
            const detailsElement = document.getElementById('dataTestDetails');
            
            statusElement.className = 'status-badge status-loading';
            statusElement.innerHTML = '<span class="spinner"></span>Testing...';
            
            try {
                // Test GitHub Pages connectivity
                const testUrl = 'https://asicoltd.github.io/FRC-AI/dataset/1/1.json';
                const response = await fetch(testUrl, { mode: 'cors' });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    statusElement.className = 'status-badge status-success';
                    statusElement.innerHTML = '<i class="fas fa-check-circle me-1"></i>Connected';
                    
                    detailsElement.innerHTML = `
                        <div class="alert alert-success">
                            <h6><i class="fas fa-check-circle me-2"></i>GitHub Pages Connected</h6>
                            <small>URL: ${testUrl}</small><br>
                            <small>Status: ${response.status} ${response.statusText}</small><br>
                            <small>Data type: ${typeof data}</small><br>
                            <small>Response time: <span id="responseTime">...</span></small>
                        </div>
                    `;
                    
                    logMessage('✓ Data loading: GitHub Pages accessible', 'success');
                    
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
                
            } catch (error) {
                statusElement.className = 'status-badge status-error';
                statusElement.innerHTML = '<i class="fas fa-times-circle me-1"></i>Failed';
                
                detailsElement.innerHTML = `
                    <div class="alert alert-danger">
                        <h6><i class="fas fa-times-circle me-2"></i>Data Loading Failed</h6>
                        <small>Error: ${error.message}</small><br>
                        <small>Could not connect to GitHub Pages</small><br>
                        <small>Check CORS settings and network connectivity</small>
                    </div>
                `;
                
                logMessage(`✗ Data loading: Failed to connect - ${error.message}`, 'error');
            }
        }
    </script>
</body>
</html>